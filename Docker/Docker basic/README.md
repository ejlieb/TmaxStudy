# Docker Basic



#### Why Docker?

결론적으로는 프로그램을 다운 받는 과정을 간단하게 하기 위해서!

도커가 없이 프로그램을 다운받아 설치하다 보면 서버, 패키지 버전,운영체제에 따라 많은 에러들이 발생하고 설치 과정이 다소 복잡하다.



#### What is Docker?

도커는 **컨테이너**를 사용하여 응용프로그램을 더 쉽게 만들고 배포하고 실행할 수 있도록 설계된 도구.

컨테이너 기반의 오픈소스 가상화 플랫폼이자 생태계이다.



#### Container

서버에서의 컨테이너 개념

- 다양한 프로그램, 실행환경을 컨테이너로 추상화하고 동일한 인터페이스를 제공한다
- 이를 통해 프로그램의 배포 및 관리를 단순하게 해준다.

- AWS, Azure, Google Cloud 등 어떤 환경에서도 실행 가능하게 해준다.





#### Docker Image & Container

Container

- 컨테이너는 코드와 모든 종속성을 패키지화하여 응용프로그램이 한 컴퓨팅 환경에서 다른 컴퓨팅 환경으로 빠르고 안정적으로 실행되도록 하는 소프트웨어 표준 단위이다.

Container Image

- 컨테이너 이미지는 코드, 런타임, 시스템 도구, 시스템 라이브러리 및 설정과 같은 응용 프로그램을 실행하는 데 필요한 모든 것을 포함하는 가볍고 독립적이며 실행 가능한 소프트웨어 패키지
- 컨테이너 이미지는 런타임에 컨테이너가 되고, 도커 컨테이너의 경우 도커 엔진에서 실행될 때 이미지가 컨테이너가 된다.
  - 쉽게 생각하면 컨테이너는 이미지의 Instance이다. 실제로 프로그램을 실행한다.

`컨테이너는 소프트웨어를 환경으로부터 격리시켜 개발과 스테이징의 차이에도 불구하고 균일하게 작동하도록 보장`



#### Docker 실행 과정

1. Docker CLI에 명령어를 입력
2. 도커 엔진(데몬)에서 실행된다
   1. 도커 클라이언트
   2. 도커 서버
   3. 이미지 캐쉬 보관장소 확인
   4. 없다면 도커 허브에서 pull
   5. 실행



#### Docker Container vs Virtual Machine

가상화 기술이 나오기 전

- 한대의 서버를 하나의 용도로만 사용
- 남는 서버 공간 방치
- 하나의 서버에 하나의 OS, 하나의 프로그램만을 운영
- 안정적이나 비효율적이다



Hypervisor 기반의 가상화 출현

- 논리적으로 공간을 분할하여 VM이라는 독립적인 가상환경의 서버 이용 가능
- 하이퍼 바이저는 호스트 시스템에서 다수의 게스트 OS를 구동할 수 있게 하는 소프트웨어다
- 하드웨어를 가상화하면서 하드웨어와 각각의 VM을 모니터링하는 중간 관리자

- 하이퍼바이저는 네이티브와 호스트형으로 나뉜다.



Docker와 VM의 공통점

- 기본 하드웨어에서 격리된 환경 내에 애플리케이션을 배치하는 방법

Docker 와 VM의 차이점

- 격리된 환경을 얼마나 격리시키느냐의 차이

- 컨테이너는 하이퍼바이저와 게스트OS가 필요하지 않으므로 오버헤드가 적다(더 가볍다)
- 어플리케이션을 실행할 때 컨테이너 방식에서는 호스트 OS위에 어플리케이션의 실행 패키지인 이미지를 배포하기만 하면 되는데 VM은 VM을 띄우고 자원을 할당한 다음 게스트 OS를 부팅하여 어플리케이션을 실행해야 한다.



**Docker Container에서 돌아가는 App은 컨테이너가 제공하는 격리 기능 내부에 샌드박스가 있지만 여전히 같은 호스트의 다른 컨테이너와 동일한 커널을 공유!**

**컨테이너 내부에서 실행하는 프로세스는 호스트 시스템에서 볼 수 있다.**



#### Docker 컨테이너 격리 방법

Linux에서 사용되는 Cgroup과 Namespace 개념



Cgroup

- CPU, 메모리, Network Bandwith, HD i/o 등 프로세스 그룹의 시스템 리소스 사용량을 관리
- 어떤 어플이 사용량이 너무 많다면 C group에 넣어 cpu와 메모리 사용 제한 가능



Namespace

- 하나의 시스템에서 프로세스를 격리시킬 수 있는 가상화 기술
- 별개의 독립된 공간을 사용하는 것처럼 격리된 환경을 제공
- 경량 프로세스 가상화 기술













