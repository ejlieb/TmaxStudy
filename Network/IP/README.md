# IP



#### IP(Internet Protocol)

-  IP는 인터넷 프로토콜의 줄임말로 네트워크 계층 중 3계층에 속한다.
- 한 호스트에서 다른 호스트까지 데이터를 전송해주는 것이 목적이다.
- 목적지까지 데이터를 전송하려면 주소를 알아야하는 이 때 이용하는 것이 IP Address이며 최적의 길을 찾는 것을 라우팅이라고 한다.
- 라우팅을 하고 목적지인 호스트까지 데이터를 딜리버하려 IP 어드레스 뿐만 아니라 MAC어드레스(물리주소)도 필요하다. 이 때 ARP 프로토콜이 사용된다.

![화면 캡처 2023 160957](C:\Users\Tmax\Desktop\TIL\TmaxStudy\Network\IP\README.assets\화면 캡처 2023 160957.png)

#### IP 지원 프로토콜

IP 안에는 그림과 같이 4가지 지원 프로토콜이 존재한다.

1. ICMP(Internet Control Message Protocol)
   - 데이터 전송 중에 문제가 생길 경우 장애상황을 통보하기 위해 사용
   - 오류가 나면 신뢰성을 보장하지 않는 IP는 단순히 오류 메시지만 전달해주는데 그 역할을 수행한다.
2. ARP(Address Resolution Protocol)
   - 이더넷이나 무선 LAN으로 데이털르 보내려면 수신측의 MAC 어드레스를 알고 있어야한다.
   - ARP는 IP 어드레스를 렌카드에 있는 MAC어드레스로 매핑해주는 역할을 한다.
   - 송신 측 장비는 요청 패킷에 수신측의 IP어드레스를 설정한 후 네트워크 전체에 브로드캐스트
   - 이 요청을 받은 호스트들 중 수신지의 IP어드레스가 자신의 MAC어드레스를 응답패킷에 설정하여 응답한다.
3. RAPP(Reverse Address Resolution Protocol)
   - ARP의 반대
   - MAC어드레스를 알 때 IP를 물어보는 프로토콜
   - 현재는 잘 사용하지 않는다



#### IP의 특징

- IP어드레스는

  - 32bit로 구성되어 있고
  - 논리적 주소이며
  - 기본데이터 단위를 데이타그램이라고 부른다
  - 비연결형이며
  - 비신뢰적이다

- 논리적 주소

  - 유일하지만 바꿀 수 있다. 이러한 점에서 MAC어드레스와 다르다.

- 비연결형(Connectionless)

  - 커넥션을 유지하지 않고 데이터를 보내는 방법
  - 정해진 길이 없기 때문에 쪼개진 데이터(datagram)들이 독립적으로 보내진다.
  - 길이 다르기 때문에 도착 순서가 바뀔 수 있다.

- 비신뢰성

  - 데이터가 올바르게 전송된다는 보장이 없다.
  - 한마디로 Guarantee가 아닌 Best effort
  - 개런티가 보장되는 것은 TCP가 유일하다.

- DataGram

  - IP에서 불리는 데이터 단위
  - 2계층에서는 데이터의 단위를 Frame이라고 하며
  - 4계층인 TCP에서는 Segment라고 한다.

  - 데이터 그램의 구성 요소
    - VERS: IP4인지 6인지 구별
    - HL: 헤드랭스, 헤드의 길이 20byte ~ 60byte다
    - Service: 잘 안쓴다..
    - Fragment Length: 네트워크에서 데이터를 쪼개서 보내는데 쪼개진 데이터의 길이를 나타낸다.
    - Datagram ID: 데이터를 나눈 순서를 표시한다.
    - FLAG: 뒤에 더 오냐 안 오냐를 표시
    - FragmentOffset: 데이터가 쪼개져서 시작하는 부분
    - TTL(TIME TO LIVE): 해당 패킷(데이터그램)이 살 수 있는 시간. 0~255며 시간 단위가 아니라 라우터를 뛰어넘을 때마다 1씩 줄어든다. 만약 0이 되었는데도 목적지에 도착하지 못하면 길을 잃었다라고 가정하며 이를 가비지 패킷이라고 한다. 다른 네트워크의 통행을 방해하기 때문에 없앤 후 없앤 곳에서 보낸 곳으로 없앴다고 알려준다.
    - Protocol: 4계층으로 올라갔을 때 트랜스포트 계층에서 어떤 프로토콜을 사용할 지 Protocol에 적혀있다.



#### IP 어드레스 활용

- 네트워크 부와 호스트 부
  - 모든 아이피 어드레스는 네트워크부와 호스트부로 나뉘는데, 호스트는 네트워크에 연결된 컴퓨터나 네트워크 장비를 말한다.

- 어드레스 클래스(Class Type)
  - 하나의 IP 어드레스 안에서 어디까지가 네트워크 부이고 어디까지가 호스트 부인지 미리 그 길이를 고정하여 결정해둔 것
  - A,B,C,D 클래스가 있으나 보통 ABC 클래스 까지 사용
- 어드레스 클래스를 조금 더 세분화해서 사용할 수 있게 해주는 것이 Subnetting(서브네팅)이다. 이 때 서브넷 마스크를 활용한다.





