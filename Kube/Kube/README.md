# Kubernetes



#### 클러스터와 노드

- 클러스터: 여러대의 서버들을 묶어서 하나의 서비스를 제공하기 위한 집합
- 노드: 클러스터에 참여하는 각각의 서버 => 마스터 노드와 워커로 나뉜다(옛날에는 슬레이브 노드라고도 했다)



#### 인프라의 추상화

- 컨테이너 시스템에서 컨테이너 어플을 쉽게 배포 관리하도록 돕는 소프트웨어 시스템
- 기본 인프라를 추상화해 개발 및 운영 팀의 개발 배포 관리를 단순화
- 모든 노드가 하나의 거대한 컴퓨터인 것처럼 수천개의 컴퓨터 노드에서 소프트웨어 어플을 실행



#### 쿠버네티스 클러스터 아키텍처

- 하드웨어 수준에서 많은 노드로 구성되며 두가지 유형으로 나뉨
  - 마스터 노드: 전체 쿠버 시스템을 관리하고 통제하는 쿠버네티스 컨트롤 플레인을 관장
  - 워커 노드: 실제 배포하고자 하는 어플의 실행을 담당



#### 쿠버네티스에서 어플 실행

1. 이미지 레지스트리에 이미지 push
2. 앱 디스크립터(문서 json or yaml)을 통해 배포 과정을 거쳐 컨트롤 플레인(마스터)에게 제출
3. 워커 노드의 kubelet(서비스 혹은 데몬)에게 명령이 전달
4. kubelet이 containerd를 컨트롤해서 이미지 레지스트리에서 pull 받은 후 컨테이너 생성



#### 클러스터 2개를 이용하는 이유

1. GKE(구글 쿠버네티스 엔진)
   - 구글이 관리하는 관리형 클러스터
   - 클러스터 세부 설정 불가
   - 클라우드 네이티브를 어느정도 바로 사용 가능
2. 온프레미스(우분투)
   - 모든 구성 요소를 직접 세팅해아 한다
   - 모든 쿠버 클러스터 설정을 직접 조각 가능하여 다양한 기능 테스트 가능



#### Ubuntu 환경에서의 쿠버네티스 클러스터 구성





